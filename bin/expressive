#!/usr/bin/env php
<?php
/**
 * Wrapper for all other commands
 *
 * @see       https://github.com/zendframework/zend-expressive-tooling for the canonical source repository
 * @copyright Copyright (c) 2017-2018 Zend Technologies USA Inc. (https://www.zend.com)
 * @license   https://github.com/zendframework/zend-expressive-tooling/blob/master/LICENSE.md New BSD License
 */

declare(strict_types=1);

use PackageVersions\Versions;

$cwd = getcwd();
require $cwd.'/vendor/autoload.php';

$container = null;
$version = strstr(Versions::getVersion('zendframework/zend-expressive-tooling'), '@', true);

if (file_exists($cwd.'/config/container.php')) {
    $container = require $cwd.'/config/container.php';
}

if (null !== $container && ! $container instanceof \Psr\Container\ContainerInterface) {
    throw new ErrorException(sprintf('%s%s file is not a valid psr-11 container.', $cwd, '/config/container.php'));
}

(new \Zend\Expressive\Tooling\ToolingApplication($container, $version))
    ->run()
;
