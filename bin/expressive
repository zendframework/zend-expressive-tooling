#!/usr/bin/env php
<?php
declare(strict_types=1);
use PackageVersions\Versions;

$cwd = getcwd();
require $cwd.'/vendor/autoload.php';

$container = null;
$version = strstr(Versions::getVersion('zendframework/zend-expressive-tooling'), '@', true);

if (file_exists($cwd.'/config/container.php')) {
    $container = require $cwd.'/config/container.php';
}

if (null !== $container && !$container instanceof \Psr\Container\ContainerInterface) {
    throw new ErrorException(sprintf('%s%s file is not a valid psr-11 container.', $cwd, '/config/container.php'));
}

(new \Zend\Expressive\Tooling\ToolingApplication($container, $version))
    ->run()
;
